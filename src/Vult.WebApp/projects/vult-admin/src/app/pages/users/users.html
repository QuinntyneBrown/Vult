<div class="users">
  <div class="users__container">
    <div class="users__list-section">
      <app-user-list
        [users]="(users$ | async) ?? []"
        [selectedUserId]="(selectedUser$ | async)?.userId || null"
        [isLoading]="(isLoading$ | async) ?? false"
        (selectUser)="onSelectUser($event)"
        (create)="onCreate()"
        (delete)="onDelete($event)"
      />
    </div>

    <div class="users__edit-section">
      @if ((isCreating$ | async) || (selectedUser$ | async)) {
        <app-user-edit
          [user]="selectedUser$ | async"
          [isCreating]="(isCreating$ | async) ?? false"
          [isSaving]="(isSaving$ | async) ?? false"
          [errorMessage]="errorMessage$ | async"
          (save)="onSave($event)"
          (cancel)="onCancel()"
        />
      } @else {
        <mat-card class="users__placeholder">
          <mat-card-content>
            <p>Select a user from the list or create a new one</p>
          </mat-card-content>
        </mat-card>
      }
    </div>
  </div>
</div>
