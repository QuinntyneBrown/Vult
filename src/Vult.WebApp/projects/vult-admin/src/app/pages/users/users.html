<ng-container *ngIf="viewModel$ | async as vm">
  <div class="users">
    <div class="users__container">
      <div class="users__list-section">
        <app-user-list
          [users]="vm.users"
          [selectedUserId]="vm.selectedUser?.userId || null"
          [isLoading]="vm.isLoading"
          (selectUser)="onSelectUser($event)"
          (create)="onCreate()"
          (delete)="onDelete($event)"
        />
      </div>

      <div class="users__edit-section">
        <ng-container *ngIf="vm.showEdit; else placeholder">
          <app-user-edit
            [user]="vm.selectedUser"
            [isCreating]="vm.isCreating"
            [isSaving]="vm.isSaving"
            [errorMessage]="vm.errorMessage"
            (save)="onSave($event)"
            (cancel)="onCancel()"
          />
        </ng-container>
        <ng-template #placeholder>
          <mat-card class="users__placeholder">
            <mat-card-content>
              <p>Select a user from the list or create a new one</p>
            </mat-card-content>
          </mat-card>
        </ng-template>
      </div>
    </div>
  </div>
</ng-container>
