<!-- Copyright (c) Quinntyne Brown. All Rights Reserved.
     Licensed under the MIT License. See License.txt in the project root for license information. -->
<div class="master-detail">
  <div class="master-detail__list">
    <app-catalog-item-list
      [catalogItems]="(catalogItems$ | async) ?? []"
      [selectedItemId]="(selectedItem$ | async)?.catalogItemId"
      [isLoading]="(isLoading$ | async) ?? false"
      [pageNumber]="(pageNumber$ | async) ?? 1"
      [pageSize]="(pageSize$ | async) ?? 20"
      [totalCount]="(totalCount$ | async) ?? 0"
      [totalPages]="(totalPages$ | async) ?? 0"
      (selectItem)="onSelectItem($event)"
      (create)="onCreate()"
      (delete)="onDelete($event)"
      (pageChange)="onPageChange($event)">
    </app-catalog-item-list>
  </div>

  <div class="master-detail__detail">
    @if (showEdit$ | async) {
      <app-catalog-item-edit
        [catalogItem]="selectedItem$ | async"
        [isCreating]="(isCreating$ | async) ?? false"
        [isSaving]="(isSaving$ | async) ?? false"
        [errorMessage]="errorMessage$ | async"
        (save)="onSave($event)"
        (cancel)="onCancel()">
      </app-catalog-item-edit>
    } @else {
      <div class="master-detail__empty">
        <mat-icon>inventory_2</mat-icon>
        <p>Select an item to edit or click "Create" to add a new catalog item</p>
      </div>
    }
  </div>
</div>
