<div class="photo-upload">
  <div class="upload-area" 
       [class.dragging]="isDragging()"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">
    
    <div class="upload-prompt" *ngIf="photos().length === 0">
      <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
      <h3>Drag and drop photos here</h3>
      <p>or</p>
      <label class="file-input-label">
        <input type="file" 
               multiple 
               accept="image/*" 
               (change)="onFileSelect($event)"
               [disabled]="isUploading()">
        Choose Files
      </label>
    </div>

    <div class="photo-previews" *ngIf="photos().length > 0">
      <div class="photo-preview" *ngFor="let photo of photos(); let i = index">
        <img [src]="photo.url" [alt]="photo.file.name">
        <button class="remove-btn" 
                (click)="removePhoto(i)"
                [disabled]="isUploading()"
                type="button">
          Ã—
        </button>
        <div class="photo-name">{{ photo.file.name }}</div>
      </div>
      
      <div class="add-more" *ngIf="!isUploading()">
        <label class="add-more-label">
          <input type="file" 
                 multiple 
                 accept="image/*" 
                 (change)="onFileSelect($event)">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
          </svg>
          <span>Add More</span>
        </label>
      </div>
    </div>
  </div>

  <div class="upload-progress" *ngIf="uploadProgress()">
    <div class="progress-bar">
      <div class="progress-fill" 
           [style.width.%]="(uploadProgress()!.current / uploadProgress()!.total) * 100">
      </div>
    </div>
    <p class="progress-text">
      {{ uploadProgress()!.status }} 
      ({{ uploadProgress()!.current }} / {{ uploadProgress()!.total }})
    </p>
  </div>

  <div class="error-message" *ngIf="errorMessage()">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    {{ errorMessage() }}
  </div>

  <div class="actions" *ngIf="photos().length > 0">
    <button class="btn btn-secondary" 
            (click)="clearPhotos()"
            [disabled]="isUploading()"
            type="button">
      Clear All
    </button>
    <button class="btn btn-primary" 
            (click)="uploadPhotos()"
            [disabled]="isUploading()"
            type="button">
      {{ isUploading() ? 'Uploading...' : 'Upload Photos' }}
    </button>
  </div>
</div>
